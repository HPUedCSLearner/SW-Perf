# SW-Perf
myself perf tools



* 时钟级别探针工具
* 低开销
* 支持分析MPI接口
* 支持分析BLAS接口
* 不依赖第三方库
* 多个热点分析结果：
1. 自身时间热点表
2. 总时间热点表
3. 调用次数热点表
4. 单次自身时间热点表

```bash
***************************函数采样信息*****************************
FuncName                                          	CpuTime           	Percentage     	SelfTime          	Percentage     	CallTimes      	AvarageSelfTime
__clustermatrixmodule_MOD_calclustermatrix        	349448626677      	84.436228%     	127046517024      	30.697870%     	33             	3849894455.272727
__rspacestrconstmodule_MOD_getstrconstmatrix      	110339951566      	26.661113%     	110303217434      	26.652237%     	417648         	264105.700097  
__wrap_zgetrf_                                    	60578803866       	14.637475%     	50593663082       	12.224796%     	164            	308497945.621951
__wrap_zgemm_                                     	36493009674       	8.817697%      	36493009674       	8.817697%      	6667           	5473677.767212 
__wrap_zgetrs_                                    	28558038478       	6.900394%      	28558038478       	6.900394%      	164            	174134380.963415
MPI_Finalize                                      	10579534755       	2.556301%      	10526128672       	2.543397%      	1              	10526128672.000000
__mssolvermodule_MOD_computemsgreenfunction       	376206648639      	90.901689%     	10114744014       	2.443995%      	33             	306507394.363636
setupstepfunction                                 	16088280332       	3.887363%      	7203322591        	1.740517%      	1              	7203322591.000000
intphi                                            	5728932402        	1.384265%      	5414066386        	1.308185%      	55616          	97347.281106   
__sssolvermodule_MOD_solvesinglescattering        	12921434992       	3.122168%      	5229359039        	1.263554%      	68             	76902338.808824
MPI_Init                                          	4221662079        	1.020068%      	4221662079        	1.020068%      	1              	4221662079.000000
computeirrsol                                     	5560098617        	1.343470%      	3532801075        	0.853620%      	66             	53527289.015152
precor4                                           	3388236480        	0.818689%      	3388236480        	0.818689%      	670            	5057069.373134 
calsig                                            	8856206961        	2.139899%      	3127274559        	0.755634%      	60             	52121242.650000
__sssolvermodule_MOD_getfreeelectrondos           	1916940456        	0.463185%      	1916924239        	0.463181%      	56             	34230789.982143
mst2                                              	413860984789      	99.999994%     	1509543563        	0.364747%      	1              	1509543563.000000
chkbnd                                            	989269681         	0.239034%      	962488593         	0.232563%      	86             	11191727.825581
numlat_                                           	594595961         	0.143670%      	594595961         	0.143670%      	422            	1408995.168246 
__wrap_zcopy_                                     	478761298         	0.115682%      	478761298         	0.115682%      	6834           	70055.794264   
sigma                                             	317283620         	0.076664%      	317283620         	0.076664%      	511188         	620.678928     
__sssolvermodule_MOD_computegf0                   	237507458         	0.057388%      	228278126         	0.055158%      	66             	3458759.484848 
calintegrationtor                                 	206134702         	0.049808%      	206134702         	0.049808%      	66             	3123253.060606 
MPI_Barrier                                       	151824256         	0.036685%      	151824256         	0.036685%      	76             	1997687.578947 
```




```bash
***************************函数采样信息*****************************
FuncName                                          	CpuTime           	Percentage     	SelfTime          	Percentage     	CallTimes      	AvarageSelfTime
main                                              	413861011003      	100.000000%    	26214             	0.000006%      	1              	26214.000000   
mst2                                              	413860984789      	99.999994%     	1509543563        	0.364747%      	1              	1509543563.000000
__gfmethodmodule_MOD_calvalencestates             	378774529825      	91.522158%     	325522            	0.000079%      	1              	325522.000000  
calintegrateddos                                  	378435455496      	91.440229%     	321340            	0.000078%      	1              	321340.000000  
__mssolvermodule_MOD_computemsgreenfunction       	376206648639      	90.901689%     	10114744014       	2.443995%      	33             	306507394.363636
calmultiplescatteringidos                         	366882360990      	88.648689%     	5796972           	0.001401%      	1              	5796972.000000 
computemstmatrix                                  	349449579769      	84.436458%     	949053            	0.000229%      	33             	28759.181818   
__clustermatrixmodule_MOD_calclustermatrix        	349448626677      	84.436228%     	127046517024      	30.697870%     	33             	3849894455.272727
__matrixblockinversionmodule_MOD_invertmatrixblock	111664023792      	26.981045%     	15065586          	0.003640%      	33             	456532.909091  
zblock_lu1                                        	111648547539      	26.977305%     	13894651          	0.003357%      	33             	421050.030303  
__rspacestrconstmodule_MOD_getstrconstmatrix      	110339951566      	26.661113%     	110303217434      	26.652237%     	417648         	264105.700097  
__wrap_zgetrf_                                    	60578803866       	14.637475%     	50593663082       	12.224796%     	164            	308497945.621951
__wrap_zgemm_                                     	36493009674       	8.817697%      	36493009674       	8.817697%      	6667           	5473677.767212 
__wrap_zgetrs_                                    	28558038478       	6.900394%      	28558038478       	6.900394%      	164            	174134380.963415
__stepfunctionmodule_MOD_initstepfunction1        	16088319137       	3.887373%      	38805             	0.000009%      	1              	38805.000000   
setupstepfunction                                 	16088280332       	3.887363%      	7203322591        	1.740517%      	1              	7203322591.000000
__sssolvermodule_MOD_solvesinglescattering        	12921434992       	3.122168%      	5229359039        	1.263554%      	68             	76902338.808824
MPI_Finalize                                      	10579534755       	2.556301%      	10526128672       	2.543397%      	1              	10526128672.000000
__stepfunctionmodule_MOD_getstepfunction1         	8884295982        	2.146686%      	1195997           	0.000289%      	9639           	124.078950     
stepyll                                           	8883099985        	2.146397%      	6743642           	0.001629%      	63             	107041.936508  
calsig                                            	8856206961        	2.139899%      	3127274559        	0.755634%      	60             	52121242.650000
intphi                                            	5728932402        	1.384265%      	5414066386        	1.308185%      	55616          	97347.281106   
computeirrsol                                     	5560098617        	1.343470%      	3532801075        	0.853620%      	66             	53527289.015152
MPI_Init                                          	4221662079        	1.020068%      	4221662079        	1.020068%      	1              	4221662079.000000
precor4                                           	3388236480        	0.818689%      	3388236480        	0.818689%      	670            	5057069.373134 
__multiscatteringdosmodule_MOD_getmscatteringdos  	2201483093        	0.531938%      	31018236          	0.007495%      	33             	939946.545455  
__sssolvermodule_MOD_getfreeelectrondos           	1916940456        	0.463185%      	1916924239        	0.463181%      	56             	34230789.982143
solveradeqn4irr                                   	1796431669        	0.434066%      	121814196         	0.029434%      	330            	369133.927273  
solveradeqn4reg                                   	1776896531        	0.429346%      	63277524          	0.015290%      	340            	186110.364706  
__systemvolumemodule_MOD_initsystemvolume         	1014384058        	0.245103%      	157364            	0.000038%      	1              	157364.000000  
__polyhedramodule_MOD_genpoly2                    	1013282037        	0.244836%      	42352             	0.000010%      	1              	42352.000000   
setupcellbound                                    	1009195644        	0.243849%      	9891012           	0.002390%      	1              	9891012.000000 
chkbnd                                            	989269681         	0.239034%      	962488593         	0.232563%      	86             	11191727.825581
__madelungmodule_MOD_initmadelung                 	654183223         	0.158068%      	46577             	0.000011%      	1              	46577.000000   
calscalingfactor                                  	609437155         	0.147256%      	4607303           	0.001113%      	1              	4607303.000000 
numlat_                                           	594595961         	0.143670%      	594595961         	0.143670%      	422            	1408995.168246 
__wrap_zcopy_                                     	478761298         	0.115682%      	478761298         	0.115682%      	6834           	70055.794264   
__sssolvermodule_MOD_initsssolver                 	317997181         	0.076837%      	111425604         	0.026923%      	1              	111425604.000000
```